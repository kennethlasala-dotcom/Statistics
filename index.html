<iframe 
  srcdoc="
  <!DOCTYPE html>
  <html lang='en'>
  <head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <script src='https://cdn.tailwindcss.com'></script>
    <title>Hypothesis Testing Trainer</title>
    <style>
      body { background: linear-gradient(to right, #e0f2fe, #bfdbfe); }
      button { transition: transform 0.1s ease; }
      button:active { transform: scale(0.97); }
    </style>
  </head>
  <body class='min-h-screen flex items-center justify-center'>
    <div id='app' class='bg-white rounded-2xl shadow-xl p-8 max-w-lg text-center border border-blue-200'>
      <h1 class='text-2xl font-bold mb-4 text-blue-700'>ðŸŽ“ Hypothesis Testing Trainer</h1>

      <div id='question-container' class='mb-6'>
        <p id='question' class='text-lg font-medium text-gray-800 mb-2'></p>
        <p id='prompt' class='text-gray-700 mb-4'></p>
        <div id='choices' class='space-x-4'>
          <button onclick='choose(&quot;reject&quot;)' class='bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg'>Reject Hâ‚€</button>
          <button onclick='choose(&quot;fail&quot;)' class='bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-lg'>Fail to Reject Hâ‚€</button>
        </div>
      </div>

      <div id='feedback' class='hidden'>
        <p id='resultText' class='text-lg font-semibold mb-2'></p>
        <p id='explanation' class='text-gray-700 mb-4'></p>
        <button id='continueBtn' onclick='nextQuestion()' class='bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg'>Continue</button>
      </div>

      <div id='summary' class='hidden'>
        <p id='scoreText' class='text-xl font-bold mb-4 text-blue-700'></p>
        <p id='previousScores' class='text-gray-700 mb-4 text-sm'></p>
        <button onclick='startQuiz()' class='bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg'>Redo Activity</button>
      </div>
    </div>

    <script>
    const questionsPerRound = 5;
    let currentQuestion = 0;
    let score = 0;
    let currentData;

    function randomQuestion() {
      const type = Math.random() > 0.5 ? 'critical' : 'area';
      let q = {};

      if (type === 'critical') {
        const testStat = (Math.random() * 4 - 2).toFixed(2);
        const critical = (Math.random() * 2 + 1.5).toFixed(2);
        const correctDecision = Math.abs(testStat) > critical ? 'reject' : 'fail';
        q = {
          text: 'Given a test statistic z = ' + testStat + ' and critical value zâ‚ = Â±' + critical + ' (two-tailed test),',
          prompt: 'Should you reject or fail to reject the null hypothesis?',
          correct: correctDecision,
          explanation: 'You ' + (correctDecision === 'reject' ? 'reject' : 'fail to reject') + ' Hâ‚€ because |z| ' + (correctDecision === 'reject' ? '&gt;' : 'â‰¤') + ' ' + critical + '.'
        };
      } else {
        const z = (Math.random() * 4 - 2).toFixed(2);
        const tail = Math.random() > 0.5 ? 'right-tailed' : 'left-tailed';
        const critical = tail === 'right-tailed' ? 1.65 : -1.65;
        const correctDecision = (tail === 'right-tailed' && z > critical) || (tail === 'left-tailed' && z < critical) ? 'reject' : 'fail';
        q = {
          text: 'For a ' + tail + ' test at Î± = 0.05, the test statistic is z = ' + z + '.',
          prompt: 'Should you reject or fail to reject the null hypothesis?',
          correct: correctDecision,
          explanation: 'The critical region is ' + (tail === 'right-tailed' ? 'z &gt; 1.65' : 'z &lt; -1.65') + '. Since z = ' + z + ', you ' + (correctDecision === 'reject' ? 'reject' : 'fail to reject') + ' Hâ‚€.'
        };
      }
      return q;
    }

    function startQuiz() {
      currentQuestion = 0;
      score = 0;
      document.getElementById('summary').classList.add('hidden');
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('question-container').classList.remove('hidden');
      nextQuestion();
    }

    function showQuestion(q) {
      document.getElementById('question').innerHTML = q.text;
      document.getElementById('prompt').textContent = q.prompt;
    }

    function choose(choice) {
      const feedback = document.getElementById('feedback');
      const resultText = document.getElementById('resultText');
      const explanation = document.getElementById('explanation');
      const questionDiv = document.getElementById('question-container');

      questionDiv.classList.add('hidden');
      feedback.classList.remove('hidden');

      if (choice === currentData.correct) {
        score++;
        resultText.textContent = 'âœ… Correct!';
        resultText.classList.add('text-green-600');
        resultText.classList.remove('text-red-600');
      } else {
        resultText.textContent = 'âŒ Incorrect.';
        resultText.classList.add('text-red-600');
        resultText.classList.remove('text-green-600');
      }
      explanation.innerHTML = currentData.explanation;
    }

    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion > questionsPerRound) {
        showSummary();
        return;
      }
      currentData = randomQuestion();
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('question-container').classList.remove('hidden');
      showQuestion(currentData);
    }

    function showSummary() {
      document.getElementById('question-container').classList.add('hidden');
      document.getElementById('feedback').classList.add('hidden');
      const summary = document.getElementById('summary');
      summary.classList.remove('hidden');
      document.getElementById('scoreText').textContent = 
        'You got ' + score + ' out of ' + questionsPerRound + ' correct! ðŸŽ‰';

      // Save score history
      let history = JSON.parse(localStorage.getItem('hypotest_scores') || '[]');
      history.push(score);
      if (history.length > 5) history.shift(); // keep last 5 scores
      localStorage.setItem('hypotest_scores', JSON.stringify(history));

      document.getElementById('previousScores').textContent = 
        'Previous scores: ' + history.join(', ');
    }

    startQuiz();
    </script>
  </body>
  </html>
  " 
  width="100%" 
  height="700" 
  style="border:none; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.15);"
  allowfullscreen>
</iframe>
